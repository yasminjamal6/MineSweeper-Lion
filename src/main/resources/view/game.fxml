<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>


<AnchorPane xmlns="http://javafx.com/javafx/23"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="main.controller.GameController"
            fx:id="root"
            prefWidth="1200.0" prefHeight="800.0"
            stylesheets="@../css/game.css"
            styleClass="game-root">

    <children>

        <!-- 砖转 砖专 注 转 (注 住转专 转) -->
        <Pane styleClass="bg-overlay"
              AnchorPane.topAnchor="0.0"
              AnchorPane.bottomAnchor="0.0"
              AnchorPane.leftAnchor="0.0"
              AnchorPane.rightAnchor="0.0" />

        <VBox spacing="12"
              AnchorPane.topAnchor="10.0"
              AnchorPane.bottomAnchor="10.0"
              AnchorPane.leftAnchor="10.0"
              AnchorPane.rightAnchor="10.0">

            <Label text="Avoid Scar! Right-click to place Simba's paw marks"
                   maxWidth="Infinity"
                   alignment="CENTER"
                   styleClass="hint-text"/>

            <!-- TOP BAR -->
            <HBox spacing="10" alignment="CENTER" styleClass="top-bar">

                <Label fx:id="scoreLabel"
                       text="Score: 0 "
                       styleClass="score-label"/>

                <Region HBox.hgrow="ALWAYS"/>

                <HBox fx:id="heartsBox"
                      alignment="CENTER"
                      spacing="0"
                      styleClass="hearts-row"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Label fx:id="livesLabel"
                       text="10 / 10"
                       styleClass="lives-counter"/>
            </HBox>

            <!-- ===== BOARDS ===== -->
            <HBox spacing="16" VBox.vgrow="ALWAYS">

                <VBox spacing="10" HBox.hgrow="ALWAYS">

                    <VBox alignment="CENTER" spacing="6">
                        <HBox alignment="CENTER" spacing="8"
                              styleClass="player-header player-header-a">
                            <Label text="" styleClass="player-icon"/>
                            <Label fx:id="playerANameLabel"
                                   text="Player A"
                                   styleClass="player-name"/>
                        </HBox>

                        <HBox alignment="CENTER" spacing="6"
                              styleClass="mines-chip">
                            <ImageView fitWidth="20" fitHeight="20">
                                <image>
                                    <Image url="@../images/scar.png"/>
                                </image>
                            </ImageView>

                            <Label fx:id="playerAMinesLabel"
                                   text="10"
                                   styleClass="mines-count"/>
                            <Label text="MINES" styleClass="mines-text"/>
                        </HBox>
                    </VBox>

                    <Label text="Board A" styleClass="board-title"/>

                    <StackPane fx:id="boardAContainer"
                               styleClass="board-container"
                               VBox.vgrow="ALWAYS">
                        <GridPane fx:id="boardAGrid"
                                  hgap="2" vgap="2"
                                  alignment="CENTER"/>
                    </StackPane>
                </VBox>

                <VBox spacing="10" HBox.hgrow="ALWAYS">

                    <VBox alignment="CENTER" spacing="6">
                        <HBox alignment="CENTER" spacing="8"
                              styleClass="player-header player-header-b">
                            <Label text="" styleClass="player-icon"/>
                            <Label fx:id="playerBNameLabel"
                                   text="Player B"
                                   styleClass="player-name"/>
                        </HBox>

                        <HBox alignment="CENTER" spacing="6"
                              styleClass="mines-chip">
                            <ImageView fitWidth="20" fitHeight="20">
                                <image>
                                    <Image url="@../images/scar.png"/>
                                </image>
                            </ImageView>

                            <Label fx:id="playerBMinesLabel"
                                   text="10"
                                   styleClass="mines-count"/>
                            <Label text="MINES" styleClass="mines-text"/>
                        </HBox>
                    </VBox>

                    <Label text="Board B" styleClass="board-title"/>

                    <StackPane fx:id="boardBContainer"
                               styleClass="board-container"
                               VBox.vgrow="ALWAYS">
                        <GridPane fx:id="boardBGrid"
                                  hgap="2" vgap="2"
                                  alignment="CENTER"/>
                    </StackPane>
                </VBox>

            </HBox>

            <HBox alignment="CENTER"
                  spacing="40"
                  styleClass="legend-row">

                <!-- Scar (Mine) -->
                <HBox alignment="CENTER" spacing="8">
                    <ImageView fitWidth="28" fitHeight="28">
                        <image>
                            <Image url="@../images/scar.png"/>
                        </image>
                    </ImageView>
                    <Label text="Scar (Mine)"
                           styleClass="legend-text"/>
                </HBox>

                <!-- Simba's Mark (Flag) -->
                <HBox alignment="CENTER" spacing="8">
                    <Label text=""
                           styleClass="legend-flag-icon"/>
                    <Label text="Simba's Mark (Flag)"
                           styleClass="legend-text"/>
                </HBox>

            </HBox>

        </VBox>

        <HBox alignment="CENTER_LEFT"
              AnchorPane.bottomAnchor="16.0"
              AnchorPane.leftAnchor="16.0">

            <Button fx:id="backHomeBtn"
                    text="Back to Home"
                    onAction="#onBackToHome"
                    styleClass="back-home-btn"/>
        </HBox>

        <!-- Countdown overlay -->
        <StackPane fx:id="countdownOverlay"
                   visible="false"
                   mouseTransparent="true"
                   AnchorPane.topAnchor="0.0"
                   AnchorPane.bottomAnchor="0.0"
                   AnchorPane.leftAnchor="0.0"
                   AnchorPane.rightAnchor="0.0"
                   styleClass="countdown-overlay">
            <VBox alignment="CENTER" spacing="12" styleClass="countdown-card">
                <Label text="Get Ready" styleClass="countdown-title"/>
                <Label fx:id="countdownLabel" text="3" styleClass="countdown-number"/>
                <ImageView fitWidth="140" fitHeight="110" preserveRatio="true" smooth="true" styleClass="countdown-gif">
                    <image>
                        <Image url="@../images/simba-walk.gif"/>
                    </image>
                </ImageView>
            </VBox>
        </StackPane>

    </children>
</AnchorPane>
